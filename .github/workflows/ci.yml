name: python flask

on: [push, pull_request]


jobs:
    test:
        runs-on: ubuntu-latest

        steps:
          - name: Tells GitHub to pull your repositoryâ€™s code into the runner
            uses: actions/checkout@v5

          - name: Install python 
            uses: actions/setup-python@v6
            with:
                python-version: '3.14.2'

          - name: Install dependencies
            run: pip install -r requirements.txt

          - name: Audit
            uses: pypa/gh-action-pip-audit@v1.0.0
            with:
                inputs: requirements.txt

          - name: flake8 Lint
            run:  flake8 .
            
          - name: Test the code
            run: python tests.py

          - name: Archive production artifacts
            uses: actions/upload-artifact@v4
            with:
                name: flask-prod-ready
                path: ./